[build]
  publish = "."

# ===== Security headers =====
[[headers]]
  for = "/*"
  [headers.values]
    # Prevent clickjacking — only allow this site to frame itself
    X-Frame-Options = "SAMEORIGIN"
    # Stop browsers from MIME-type sniffing
    X-Content-Type-Options = "nosniff"
    # Control referrer info sent with requests
    Referrer-Policy = "strict-origin-when-cross-origin"
    # Force HTTPS for 1 year (includeSubDomains for full coverage)
    Strict-Transport-Security = "max-age=31536000; includeSubDomains; preload"
    # Legacy XSS filter — still respected by some browsers
    X-XSS-Protection = "1; mode=block"
    # Content Security Policy — whitelist only what the site needs
    Content-Security-Policy = "default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline'; img-src 'self' data:; font-src 'self'; connect-src 'self'; frame-ancestors 'self'; form-action 'self'; base-uri 'self'; object-src 'none'"
    # Restrict browser features the site does not need
    Permissions-Policy = "camera=(), microphone=(), geolocation=(), payment=(), usb=(), magnetometer=(), gyroscope=(), accelerometer=()"
    # Prevent cross-origin isolation attacks
    Cross-Origin-Opener-Policy = "same-origin"
    Cross-Origin-Resource-Policy = "same-origin"

# ===== Cache headers for static assets =====
[[headers]]
  for = "/assets/*"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"
